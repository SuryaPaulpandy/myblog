{% extends 'blog/base.html' %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 animate__animated animate__fadeInUp">

            <!-- main profile card -->
            <div class="card border-0 shadow-lg rounded-4 overflow-hidden">

                <!-- Card Header with Gradient -->
                <div class="card-header border-0 p-5 text-center position-relative text-white"
                    style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">

                    <div class="position-relative z-1">
                        <!-- Avatar Circle -->
                        <div class="mb-3 d-inline-block position-relative">
                            {% if user.profile_picture %}
                            <img src="{{ user.profile_picture.url }}" alt="{{ user.username }}"
                                class="rounded-circle border border-4 border-white shadow-sm"
                                style="width: 140px; height: 140px; object-fit: cover;">
                            {% else %}
                            <div class="rounded-circle bg-white text-primary d-flex align-items-center justify-content-center border border-4 border-white shadow-sm"
                                style="width: 140px; height: 140px; font-size: 3.5rem; font-weight: bold;">
                                {{ user.username|make_list|first|upper }}
                            </div>
                            {% endif %}

                            <!-- Status Indicator (Cosmetic) -->
                            <div class="position-absolute bottom-0 end-0 bg-success border border-white border-2 rounded-circle"
                                style="width: 20px; height: 20px; right: 10px; bottom: 10px;"></div>
                        </div>

                        <h2 class="fw-bold mb-1">{{ user.username }}</h2>
                        <p class="mb-0 opacity-75"><i class="bi bi-envelope-fill me-2"></i>{{ user.email }}</p>
                    </div>

                    <!-- Decorative Background Shapes -->
                    <div class="position-absolute top-0 start-0 w-100 h-100 opacity-10"
                        style="background-image: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.4) 0%, transparent 20%), radial-gradient(circle at 80% 80%, rgba(255,255,255,0.4) 0%, transparent 20%); pointer-events: none;">
                    </div>
                </div>

                <div class="card-body p-4 p-md-5 bg-white">

                    <!-- Stats Section -->
                    <div class="row g-4 mb-5">
                        <div class="col-6">
                            <div
                                class="p-3 bg-light rounded-4 text-center h-100 hover-up transition-base border border-light">
                                <div class="mb-2">
                                    <i class="bi bi-calendar-check text-primary fs-3"></i>
                                </div>
                                <p class="text-muted mb-1 small text-uppercase fw-bold ls-1">Joined</p>
                                <h6 class="fw-bold mb-0 text-dark">{{ user.date_joined|date:"M d, Y" }}</h6>
                            </div>
                        </div>
                        <div class="col-6">
                            <div
                                class="p-3 bg-light rounded-4 text-center h-100 hover-up transition-base border border-light">
                                <div class="mb-2">
                                    <i class="bi bi-clock-history text-secondary fs-3"></i>
                                </div>
                                <p class="text-muted mb-1 small text-uppercase fw-bold ls-1">Last Seen</p>
                                <h6 class="fw-bold mb-0 text-dark">{{ user.last_login|date:"M d, Y" }}</h6>
                            </div>
                        </div>
                    </div>

                    <!-- Reading Mode: Form Fields -->
                    <h5 class="fw-bold mb-4 d-flex align-items-center">
                        <i class="bi bi-person-lines-fill me-2 text-primary"></i> Account Details
                    </h5>

                    <form>
                        <fieldset disabled>
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control bg-light" id="floatingInputUsername"
                                    placeholder="Username" value="{{ user.username }}">
                                <label for="floatingInputUsername">Username</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control bg-light" id="floatingInputEmail"
                                    placeholder="name@example.com" value="{{ user.email }}">
                                <label for="floatingInputEmail">Email address</label>
                            </div>

                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="text" class="form-control bg-light" id="floatingFirstName"
                                            placeholder="First Name" value="{{ user.first_name|default:'' }}">
                                        <label for="floatingFirstName">First Name</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="text" class="form-control bg-light" id="floatingLastName"
                                            placeholder="Last Name" value="{{ user.last_name|default:'' }}">
                                        <label for="floatingLastName">Last Name</label>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </form>

                    <!-- Action Buttons -->
                    <div class="mt-5 d-flex justify-content-between align-items-center pt-4 border-top">
                        <a href="{% url 'blog:dashboard' %}" class="btn btn-link text-decoration-none text-muted px-0">
                            <i class="bi bi-arrow-left me-1"></i> Back to Dashboard
                        </a>
                        <!-- Edit Feature -->
                        <a href="{% url 'blog:edit_profile' %}"
                            class="btn btn-primary-custom px-4 py-2 shadow-sm rounded-pill">
                            <i class="bi bi-pencil-square me-2"></i> Edit Profile
                        </a>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Small layout tweaks specific to profile */
    .ls-1 {
        letter-spacing: 1px;
    }

    .transition-base {
        transition: all 0.3s ease;
    }

    .hover-up:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
    }
</style>
{% endblock %}